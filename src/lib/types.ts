import { z } from "zod";

export const PromptTypeSchema = z.enum(["artistic", "json"]);
export type PromptType = z.infer<typeof PromptTypeSchema>;

export const CreationTypeSchema = z.enum(["inScene", "studio"]);
export type CreationType = z.infer<typeof CreationTypeSchema>;

// For form validation
export const CharacterFormSchema = z.object({
  description: z.string().min(1, "Description is required."),
  artStyle: z.string().optional().default(''),
  cameraAngle: z.string().optional().default(''),
  lightingStyle: z.string().optional().default(''),
  camera: z.string().optional().default(''),
  filmType: z.string().optional().default(''),
  promptType: PromptTypeSchema.default("artistic"),
  creationType: CreationTypeSchema.default("inScene"),
});
export type CharacterFormData = z.infer<typeof CharacterFormSchema>;

// For storage
export type Character = CharacterFormData & {
  id: string;
  name: string; // Extracted by AI
  appearanceDescription: string; // Generated by AI
  prompt: string;
  createdAt: string; // Use ISO string for serialization
};

// For form validation
export const SceneFormSchema = z.object({
  sceneDescription: z.string().min(1, "Scene description is required."),
  characterId: z.string().optional(),
  outfitId: z.string().optional(),
  locationId: z.string().optional(),
  artStyle: z.string().optional().default(''),
  cameraAngle: z.string().optional().default(''),
  lightingStyle: z.string().optional().default(''),
  camera: z.string().optional().default(''),
  filmType: z.string().optional().default(''),
  promptType: PromptTypeSchema.default("artistic"),
});
export type SceneFormData = z.infer<typeof SceneFormSchema>;

// For storage
export type Scene = SceneFormData & {
  id: string;
  prompt: string;
  createdAt: string; // Use ISO string for serialization
};

// For Outfit Generation
export const OutfitFormSchema = z.object({
    description: z.string().min(1, "Outfit description is required."),
});
export type OutfitFormData = z.infer<typeof OutfitFormSchema>;

export type Outfit = {
    id: string;
    characterId: string; // Character it's assigned to. Can be empty if not assigned.
    name: string;
    description: string; // The original user description
    prompt: string; // The detailed AI-generated description
    createdAt: string;
};

// For Location Generation
export const LocationFormSchema = z.object({
  description: z.string().min(1, "Description is required."),
  artStyle: z.string().optional().default(''),
  cameraAngle: z.string().optional().default(''),
  lightingStyle: z.string().optional().default(''),
  camera: z.string().optional().default(''),
  filmType: z.string().optional().default(''),
  promptType: PromptTypeSchema.default("artistic"),
});
export type LocationFormData = z.infer<typeof LocationFormSchema>;

// For storage
export type Location = LocationFormData & {
  id: string;
  name: string; // Extracted by AI
  prompt: string;
  createdAt: string; // Use ISO string for serialization
};
